MongoDB ржХрзЛржбрзЗрж░ ржкрзНрж░рждрж┐ржЯрж┐ рж▓рж╛ржЗржирзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрзНржпрж╛ржЦрзНржпрж╛ ржмрж╛ржВрж▓рж╛рзЯ (ржмрж╛ржВрж▓рж╛ рж╕рзНржХрзНрж░рж┐ржкрзНржЯрзЗ) ржжрж┐рж▓рж╛ржоржГ

js
Copy
Edit
const express = require('express');
ЁЯФ╣ Express рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржиржкрзЛрж░рзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ тАФ ржПржЯрж┐ ржПржХржЯрж┐ ржЬржиржкрзНрж░рж┐рзЯ Node.js ржлрзНрж░рзЗржоржУрзЯрж╛рж░рзНржХ ржпрж╛ ржжрж┐рзЯрзЗ REST API рждрзИрж░рж┐ ржХрж░рж╛ рж╕рж╣ржЬ рж╣рзЯред

js
Copy
Edit
const cors = require('cors');
ЁЯФ╣ CORS (Cross-Origin Resource Sharing) ржЗржиржкрзЛрж░рзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ, ржпрж╛рждрзЗ ржЕржирзНржп ржбрзЛржорзЗржЗржи ржерзЗржХрзЗржУ рждрзЛржорж╛рж░ API рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЧрзНрж░рж╣ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗред

js
Copy
Edit
const port = process.env.PORT || 5000;
ЁЯФ╣ port рж╕рзЗржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред ржпржжрж┐ environment variable ржП PORT ржжрзЗржУрзЯрж╛ ржерж╛ржХрзЗ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ, ржирж╛ рж╣рж▓рзЗ рзлрзжрзжрзж ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗред

js
Copy
Edit
const app = express();
ЁЯФ╣ Express ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред ржПрж░ ржоржзрзНржпрзЗржЗ рж╕ржм API ржбрж┐ржлрж╛ржЗржи ржХрж░рж╛ рж╣ржмрзЗред

js
Copy
Edit
app.use(cors())
ЁЯФ╣ ржПржЗ рж▓рж╛ржЗржиржЯрж┐ рж╕ржм incoming request-ржП CORS allow ржХрж░рзЗ ржжрж┐ржЪрзНржЫрзЗред

js
Copy
Edit
app.use(express.json());
ЁЯФ╣ ржПржЗ рж▓рж╛ржЗржиржЯрж┐ ржжрж┐рзЯрзЗ JSON body parser ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ, ржпрж╛рждрзЗ request body ржерзЗржХрзЗ JSON ржбрзЗржЯрж╛ ржирзЗржУрзЯрж╛ ржпрж╛рзЯред

js
Copy
Edit
const { MongoClient, ServerApiVersion, ObjectId } = require('mongodb');
ЁЯФ╣ MongoDB-ржПрж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржХрзНрж▓рж╛рж╕ржЧрзБрж▓рзЛ (MongoClient, ServerApiVersion, ObjectId) ржЗржиржкрзЛрж░рзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред

js
Copy
Edit
const uri = "mongodb+srv://akashAhmed:zkGCearveUQRWIaG@cluster0.zchez.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0";
ЁЯФ╣ MongoDB ржЕрзНржпрж╛ржЯрж▓рж╛рж╕ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕рзЗрж░ URI (connection string) ржПржЦрж╛ржирзЗ рж╕ржВрж░ржХрзНрж╖рж┐рждред ржПржЯрж╛ ржжрж┐рзЯрзЗ рждрзЛржорж╛рж░ MongoDB-рждрзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред

js
Copy
Edit
const client = new MongoClient(uri, {
serverApi: {
version: ServerApiVersion.v1,
strict: true,
deprecationErrors: true,
}
});
ЁЯФ╣ MongoDB Client рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред ржПржЯрж┐ ржжрж┐рзЯрзЗ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕рзЗ ржХрж╛ржЬ ржХрж░рж╛ рж╣ржмрзЗред ржПржЦрж╛ржирзЗ serverApi ржжрзЗржУрзЯрж╛ рж╣ржЪрзНржЫрзЗ, ржпрж╛ MongoDB ржПрж░ ржирждрзБржи API ржмрзНржпржмрж╣рж╛рж░рзЗ рж╕рж╣рж╛рзЯрждрж╛ ржХрж░рзЗред

run ржлрж╛ржВрж╢ржи рж╢рзБрж░рзБ рж╣ржЪрзНржЫрзЗ:
js
Copy
Edit
async function run() {
try {
await client.connect();
ЁЯФ╣ MongoDB-рждрзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред async рж╣ржУрзЯрж╛рзЯ await ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

js
Copy
Edit
const userCollection = client.db("userInfo").collection("info");
ЁЯФ╣ userInfo ржирж╛ржорзЗрж░ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕рзЗрж░ ржнрж┐рждрж░рзЗ info ржирж╛ржорзЗрж░ collection ржирзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ ржЗржЙржЬрж╛рж░ ржбрзЗржЯрж╛ ржерж╛ржХржмрзЗред

тЬЕ рж╕ржорж╕рзНржд API ржЧрзБрж▓рзЛ ржПржЦржи ржбрж┐ржлрж╛ржЗржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ:
js
Copy
Edit
app.get("/users", async (req, res) => {
const cursor = userCollection.find()
const result = await cursor.toArray();
res.send(result)
})
ЁЯФ╣ /users ржП GET рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рж▓рзЗ рж╕ржм ржЗржЙржЬрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕ ржерзЗржХрзЗ ржмрзЗрж░ ржХрж░рзЗ array ржЖржХрж╛рж░рзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗржмрзЗред

js
Copy
Edit
app.post("/users", async (req, res) => {
const user = req.body;
const result = await userCollection.insertOne(user);
res.send(result);
});
ЁЯФ╣ /users ржП POST рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рж▓рзЗ req.body ржерзЗржХрзЗ ржЗржЙржЬрж╛рж░ ржбрзЗржЯрж╛ ржирж┐рзЯрзЗ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕рзЗ ржПржХржЯрж┐ ржирждрзБржи ржЗржЙржЬрж╛рж░ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржмрзЗред

js
Copy
Edit
app.get("/users/:id", async (req, res) =>{
const id = req.params.id;
const query = {\_id : new ObjectId(id)}
const users = await userCollection.findOne(query);
res.send(users)
})
ЁЯФ╣ /users/:id тЖТ ржЗржЙржЬрж╛рж░рзЗрж░ ID ржжрж┐рзЯрзЗ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржЙржЬрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржмрзЗрж░ ржХрж░рзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯред

js
Copy
Edit
app.put("/users/:id", async (req, res) => {
const id = req.params.id;
const user = req.body;
const filter = {\_id : new ObjectId(id)}
const option = {upsert : true}
const updateUser = {
$set : {
name: user.name,
email: user.email,
}
}
const result = await userCollection.updateOne(filter, updateUser, option);
res.send(result)
})
ЁЯФ╣ /users/:id тЖТ PUT рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рж▓рзЗ ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ ржбрзЗржЯрж╛ ржЖржкржбрзЗржЯ ржХрж░рзЗред upsert: true ржорж╛ржирзЗ, ржЗржЙржЬрж╛рж░ ржирж╛ ржерж╛ржХрж▓рзЗ ржирждрзБржи ржХрж░рзЗ ржЗржирж╕рж╛рж░рзНржЯржУ ржХрж░ржмрзЗред

js
Copy
Edit
app.delete("/users/:id", async (req, res) =>{
const id = req.params.id;
const query = {\_id : new ObjectId(id)}
const result = await userCollection.deleteOne(query)
res.send(result)
})
ЁЯФ╣ /users/:id тЖТ DELETE рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ рж╕рзЗржЗ \_id ржПрж░ ржЗржЙржЬрж╛рж░ржХрзЗ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕ ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рзЗред

js
Copy
Edit
await client.db("admin").command({ ping: 1 });
console.log("Pinged your deployment. You successfully connected to MongoDB!");
ЁЯФ╣ MongoDB ржХрж╛ржирзЗржХрж╢ржи рж╕ржлрж▓ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ ping ржХржорж╛ржирзНржб ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред

js
Copy
Edit
// await client.close();
ЁЯФ╣ ржПржЗ рж▓рж╛ржЗржиржЯрж┐ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржХрж╛ржирзЗржХрж╢ржи ржмржирзНржз ржХрж░рж╛рж░ ржЬржирзНржп, ржХрж┐ржирзНрждрзБ ржПржЦрж╛ржирзЗ ржХржорзЗржирзНржЯ ржХрж░рзЗ рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗржи рж╕рж╛рж░рзНржнрж╛рж░ ржмржирзНржз ржирж╛ рж╣рзЯред

рж╕рж╛рж░рзНржнрж╛рж░рзЗрж░ ржмрзЗрж╕ рж░рж╛ржЙржЯ:
js
Copy
Edit
app.get("/", (req, res) => {
res.send("server is connected")
});
ЁЯФ╣ рж░рзБржЯ /-ржП ржЧрзЗрж▓рзЗ "server is connected" рж░рзЗрж╕ржкржирзНрж╕ ржжрзЗржЦрж╛ржмрзЗред ржПржЯрж╛ рж╕рж╛ржзрж╛рж░ржгржд рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж▓ржЫрзЗ ржХрж┐ржирж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред

js
Copy
Edit
app.listen(port, () => {
console.log(`server port is running... ${port}`)
});
ЁЯФ╣ Express рж╕рж╛рж░рзНржнрж╛рж░ ржЪрж╛рж▓рзБ рж╣ржЪрзНржЫрзЗ ржПржмржВ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзЛрж░рзНржЯрзЗ listen ржХрж░ржЫрзЗред ржХржирж╕рзЛрж▓рзЗ ржкрзЛрж░рзНржЯ ржирж╛ржо ржжрзЗржЦрж╛ржмрзЗред

ЁЯФР Important Note (ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг):
рждрзЛржорж╛рж░ MongoDB URI-рждрзЗ ржЗржЙржЬрж╛рж░ржирзЗржо ржУ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржЦрзЛрж▓рж╛ ржЖржЫрзЗ тАФ ржПржЯрж┐ рж╕рж┐ржХрж┐ржЙрж░ ржирзЯред рждрзБржорж┐ .env ржлрж╛ржЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ URI рж╣рж╛ржЗржб ржХрж░рждрзЗ ржкрж╛рж░рзЛред

рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржПржЯрж╛ржХрзЗ .env ржлрж╛ржЗрж▓рж╕рж╣ secure ржХрж░рзЗ рж╕рзЗржЯржЖржк ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред

ржЖрж░ржУ ржЬрж╛ржирждрзЗ ржЪрж╛ржУ? ржХрж┐ржнрж╛ржмрзЗ ржбрж╛ржЯрж╛ржмрзЗржЗрж╕ connect ржХрж░рзЛ ржмрж╛ CRUD operation ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рзЛ тАФ рж╕ржм ржмрж╛ржВрж▓рж╛рзЯ ржмрзБржЭрж┐рзЯрзЗ ржжрж┐ржмрзЛред
